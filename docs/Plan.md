# План автоматизации тестирования комплексного сервиса покупки туров

## Предусловие выполнения сценария:
1. Установить и запустить IntelliJ IDEA;
2. Установать и запустить Docker Desktop;
3. Скачать проект с [Github]_(https://github.com/artem4ik002/Diplom_qa) командой git clone
4. Открыть проект в IntelliJ IDEA;
5. Запустить MySQL, PostgreSQL, NodeJS через терминал командой:
   ```
   docker-compose up -d
   ```
6. В новой вкладке терминала запустить тестируемое приложение:

    * Для MySQL:
   ```
   java "-Dspring.datasource.url=jdbc:mysql://localhost:3306/app" -jar artifacts/aqa-shop.jar
   ```
    * Для PostgreSQL:
   ```
   java "-Dspring.datasource.url=jdbc:postgresql://localhost:5432/app" -jar artifacts/aqa-shop.jar
   ``` 
 
7. Проверить доступность приложения. - Открыть браузер, перейти по адресу:http://localhost:8080;
8. Проверить сценарии на вкладке "Купить", затем на вкладке "Купить в кредит".

## Перечень автоматизируемых сценариев
### Предусловия:


***Валидными данными для заполнения формы считать:***
* *В поле "Номер карты" данные для ввода:*
    * "4444 4444 4444 4441" - статус APPROVED;
    * "4444 4444 4444 4442" - статус DECLINED;
* *В поле "Месяц" ввести цифры в диапазоне от 01 до 12(при выборе текущего года свыше текущего месяца);*
* *В поле "Год" ввести последние две цифры года в диапазоне от текущего года плюс 5 лет;*
* *Поле "Владелец" заполнено на латинице, First Name Last Name;*
* *В поле "CVC/CVV" ввести цифры в диапазоне от 000 до 999;*

## Перечень автоматизируемых сценариев:

### Позитивные сценарии:

1. **Номер карты со статусом APPROVED.**
   * Ввести валидные данные для заполнения формы (номер карты - 4444 4444 4444 4441).
   * Нажать на кнопку "Продолжить".
   
   **Ожидаемый результат:**
   - Появится сообщение "Успешно! Операция одобрена банком".
  
 
2. **Номер карты со статусом DECLINED.**
   * Ввести валидные данные для заполнения формы (номер карты - 4444 4444 4444 4442).
   * Нажать на кнопку "Продолжить".

   **Ожидаемый результат:**
   - Появится сообщение "Ошибка! Банк отказал в проведении операции".

3. **Отправка формы заявки, в которой поле "Владелец" содержит значение введенное в верхнем регистре. Остальные поля заполнены валидными данными.**
   * Ввести валидные данные для заполнения формы (в поле "Имя" ввести "АРТЁМ СМИРНОВ").
   * Нажать на кнопку "Продолжить".

   **Ожидаемый результат:**
   - Появится сообщение "Успешно! Операция одобрена банком".


4. **Отправка формы заявки, в которой поле "Владелец" содержит значение через дефис. Остальные поля формы содержат валидные данные.**
   * Ввести валидные данные для заполнения формы (в поле "Имя" ввести Владимир Сан-Мартин).
   * Нажать на кнопку "Продолжить".

  **Ожидаемый результат:**
  - Появится сообщение "Успешно! Операция одобрена банком".


### Негативные сценарии:
1. **Пустая форма**
   * Оставить все поля формы пустыми;
   * Нажать на кнопку "Продолжить".
   
   **Ожидаемый результат:**
   -  Под полями появятся сообщение об ошибке: "Поле обязательно для заполнения".
   

2. **Форма с невалидным номером карты**
   
   2.1. **Номер карты 4444 4444 4444 4443**
      * Ввести валидные данные для заполнения формы (номер карты - 4444 4444 4444 4443).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
       - Появится сообщение "Ошибка! Банк отказал в проведении операции".

   2.2. **Номер карты все нули**
      * Ввести валидные данные для заполнения формы (номер карты - 0000 0000 0000 0000).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Появится сообщение "Ошибка! Банк отказал в проведении операции".
   
   2.3. **Форма, где в номере карт цифр меньше 16**
      * Ввести валидные данные для заполнения формы (номер карты - 4444 4444 4444 444).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Номер карты" появится сообщение об ошибке "Неверный формат".

3. **Форма с невалидным значением месяца**
   
   3.1. **Месяц 00**
      * Ввести валидные данные для заполнения формы (в поле "Месяц" ввести 00).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Месяц" появится сообщение об ошибке "Неверно указан срок действия карты".
	  
   3.2. **Месяц более 12**
      * Ввести валидные данные для заполнения формы (в поле "Месяц" ввести 13).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Месяц" появится сообщение об ошибке "Неверно указан срок действия карты".
	  
   3.3. **Месяц менее 2 цифр**
      * Ввести валидные данные для заполнения формы (в поле "Месяц" ввести 1).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Месяц" появится сообщение об ошибке "Неверный формат".
	  
4. **Форма с невалидным значением года**

   4.1. **Год 00**
      * Ввести валидные данные для заполнения формы (в поле "Год" ввести 00).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Год" появится сообщение об ошибке "Истёк срок действия карты".
   
   4.2. **Год более допустимого**
      * Ввести валидные данные для заполнения формы (в поле "Год" ввести 35).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Год" появится сообщение об ошибке "Неверно указан срок действия карты".
   
   4.3. **Год менее допустимого**
      * Ввести валидные данные для заполнения формы (в поле "Год" ввести 23).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Год" появится сообщение об ошибке "Истёк срок действия карты".
	  
5. **Форма с невалидным значением поля Владелец**

   5.1. **В поле Владелец имя и фамилия на кириллице**
      * Ввести валидные данные для заполнения формы (в поле "Владелец" ввести Фамилию и Имя на кириллице).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Владелец" появится сообщение об ошибке "Неверный формат".
   
   5.2 **В поле Владелец ввести цифры**
      * Ввести валидные данные для заполнения формы (в поле "Владелец" ввести 0123456789).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Владелец" появится сообщение об ошибке "Неверный формат".
   
   5.3. **В поле Владелец одна буква**
      * Ввести валидные данные для заполнения формы (в поле "Владелец" ввести F).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Владелец" появится сообщение об ошибке "Неверный формат".
   
   5.4. **В поле Владелец - спецсимволы**
      * Ввести валидные данные для заполнения формы (в поле "Владелец" ввести спецсимволы).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "Владелец" появится сообщение об ошибке "Неверный формат".
	  
6. **Форма с невалидным "CVC/CVV"**

   6.1. **В поле "CVC/CVV" две цифры**
      * Ввести валидные данные для заполнения формы (в поле "CVC/CVV" ввести 99).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "CVC/CVV" появится сообщение об ошибке "Неверный формат".
   
   6.2. **В поле "CVC/CVV" одна цифра;**
      * Ввести валидные данные для заполнения формы (в поле "CVC/CVV" ввести 9).
      * Нажать на кнопку "Продолжить".

      **Ожидаемый результат:**
      - Под полем "CVC/CVV" появится сообщение об ошибке "Неверный формат".
	  
## Запуск автотестов:
В новой вкладке терминала запустить тесты:
1. Для MySQL:
   ```
   ./gradlew clean test "-Ddb.url=jdbc:mysql://localhost:3306/app"
   ```
2. Для PostgreSQL:
   ```
   ./gradlew clean test "-Ddb.url=jdbc:postgresql://localhost:5432/app"
   ```

## Формирование отчета о проведенном тестировании:
Формирование отчета производится с помощью Allure. Для этого в новой вкладке терминала ввести команду
```
./gradlew allureServe
```
## Перечень используемых инструментов с обоснованием выбора:

1. `IntelliJ IDEA`- интегрированная среда разработки ПО для многих языков программирования. Удобная среда подготовки авто-тестов.
2. `Java 11` - объектно-ориентированный язык программирования, оптимальный для написания понятных и наглядных авто-тестов.
3. `JUnit 5` - инструмент тестирования, среда модульного тестирования для языка программирования Java.
4. `Gradle` - мощная и простая система автоматической сборки проектов, которая используется для упрощения работы с JAVA.
5. `Selenide` - это фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver, дающий следующие преимущества: изящный API, поддержка AJAX для стабильных тестов, мощные селекторы, простая конфигурация.
6. `Faker` - это библиотека, которая позволяет генерировать случайные данные. С ее помощью можно заполнить таблицы в базе данных, построить корректные XML-документы, сформировать JSON-ответы для REST.
7. `Allure` - фреймворк, предназначенный для создания визуально наглядной картины выполнения тестов.
8. `Docker` - Запуск необходимых приложений из контейнера без необходимости их установки на ОС.
9. `DBeaver` - удобный инструмент для работы с базами данных.
10. `MySQL` - свободная реляционная система управления базами данных.   
11. `PostgreSQL` - свободная объектно-реляционная система управления базами данных с открытым исходным кодом.
12. `Github` - хранилище SUT и авто-тестов.


## Перечень и описание возможных рисков при автоматизации:

- Трудности при настройке инструментов, необходимых для автоматизированного тестирования (одновременная поддержка 2-х СУБД, запуск контейнеров и SUT);
- Отсутствие документации на тестируемое приложение;
- Зависимость авто-тестов от текущей реализации веб-элементов (при возможном изменении структуры сайта, в ходе реализации проекта, есть риск что авто-тесты упадут;
- Отсутствие проверки графической составляющей авто-тестами
- Состояние верстки при тех или иных действиях посетителя, комфортна ли выбранная цветовая схема оформления и тд.

## Интервальная оценка с учётом рисков (в часах):
- Планирование: 20 часов;
- Автоматизация: 40 часов;
- Отчетные документы по итогам тестирования: 10 ч;
- Отчетные документы по итогам автоматизации: 10 ч;

## План сдачи работ:

*Ориентировочные даты:*
- 07.06.2024 - написание авто-тестов.
- 17.06.2024 - подготовка отчетов по результатам тестирования, автоматизации.