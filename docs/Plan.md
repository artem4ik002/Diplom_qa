# План автоматизации тестирования комплексного сервиса покупки туров

## Предусловие выполнения сценария:
1. Установить и запустить IntelliJ IDEA;
2. Установать и запустить Docker Desktop;
3. Скачать проект с [Github]_(https://github.com/artem4ik002/Diplom_qa) командой git clone
4. Открыть проект в IntelliJ IDEA;
5. Запустить MySQL, PostgreSQL, NodeJS через терминал командой:
   ```
   docker-compose up -d
   ```
6. В новой вкладке терминала запустить тестируемое приложение:

    * Для MySQL:
   ```
   java "-Dspring.datasource.url=jdbc:mysql://localhost:3306/app" -jar artifacts/aqa-shop.jar
   ```
    * Для PostgreSQL:
   ```
   java "-Dspring.datasource.url=jdbc:postgresql://localhost:5432/app" -jar artifacts/aqa-shop.jar
   ``` 
 
7. Проверить доступность приложения. - Открыть браузер, перейти по адресу:http://localhost:8080;
8. Проверить сценарии на вкладке "Купить", затем на вкладке "Купить в кредит".

## Перечень автоматизируемых сценариев
### Предусловия:


***Валидными данными для заполнения формы считать:***
* *В поле "Номер карты" данные для ввода:*
    * "4444 4444 4444 4441" - статус APPROVED;
    * "4444 4444 4444 4442" - статус DECLINED;
* *В поле "Месяц" ввести цифры в диапазоне от 01 до 12(при выборе текущего года свыше текущего месяца);*
* *В поле "Год" ввести последние две цифры года в диапазоне от текущего года плюс 5 лет;*
* *Поле "Владелец" заполнено на латинице, First Name Last Name;*
* *В поле "CVC/CVV" ввести цифры в диапазоне от 000 до 999;*

### UI тесты
___
#### Оплата по карте
1. **Карта со статусом APPROVED, все поля формы покупки валидные**
* Нажать на кнопку "Купить"
* В появившихся полях ввести валидные данные: номер карты 4444 4444 4444 4441
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** форма отправилась успешно, всплывающее сообщение "Успешно. Операция одобрена банком!"
  
2. **Карта со статусом DECLINED, все поля формы покупки валидные**
* Нажать на кнопку "Купить"
* В появившихся полях ввести валидные данные: номер карты 4444 4444 4444 4442
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы выполнена успешно, всплывающее сообщение "Ошибка! Банк отказал в проведении операции!"
  
3. **Поле "Номер карты" пустое, все остальные поля формы покупки валидные**
* Нажать на кнопку "Купить"
* Оставить поле "Номер карты" пустым, все остальные заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Номер карты"

4. **Поле "Номер карты" из 15-ти цифр**
* Нажать на кнопку "Купить"
* Заполнить поле "Номер карты" невалидным граничным номером карты из 15-ти цифр (например, 4444 4444 4444 444), остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Номер карты"

5. **Данные карты, которой нет в базе данных**
* Нажать на кнопку "Купить"
* Заполнить поле "Номер карты" валидным номером карты, которой нет в БД банка (например, 1234 5678 1234 5678), остальные поля – валидными данными
* Нажать на кнопку "Продолжить" 
**Ожидаемый результат:** отправка формы возможна, всплывающее сообщение "Ошибка! Банк отказал в проведении операции"

6. **Поле "Месяц" пустое**
* Нажать на кнопку "Купить"
* Оставить поле "Месяц" пустым, все остальные заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "Месяц"

7. **Поле "Месяц" со значением 00**
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" невалидным значением меньше 1 (например: 00), остальные поля – валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Месяц"

8. **Поле "Месяц" со значением 13**
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" невалидным значением больше 12 (например: 13), остальные поля – валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Месяц"

9. **Поле "Месяц" со значением 3**
* Нажать на кнопку "Купить"
* Заполнить поле "Месяц" невалидным значением из одной цифры (например: 3), остальные поля – валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Месяц"

10. **Поле "Год" пустое**
* Нажать на кнопку "Купить"
* Поле "Год" оставить пустым, остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение «Поле обязательно для заполнения» под полем "Год"

11. **Поле "Год" со значением 1**
* Нажать на кнопку "Купить"
* Заполнить поле "Год" невалидными данными с неверным форматом года (например: 1), остальные поля - валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Год"

12. **Поле "Год" со значением, предшествующее текущему**
* Нажать на кнопку "Купить"
* Заполнить поле "Год" граничными невалидными данными года, предшествующего текущему (например: 21), остальные поля – валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Истек срок действия карты" под полем "Год"

13. **Поле "Год" со значением, превышающим 5 лет от текущего**
* Нажать на кнопку "Купить"
* Заполнить поле "Год" значением, превышающим 5 лет от текущего (например: 28), остальные поля – валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверно указан срок действия карты" под полем "Год"

14. **Поле "Владелец" фамилия и имя в верхнем регистре**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" фамилию и имя на латинице в верхнем регистре (например: IZOTOVA YULIA), остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"
**Ожидаемый результат:** форма отправилась успешно, всплывающее сообщение "Успешно. Операция одобрена банком!"

15. **Поле "Владелец" данные через дефис**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" фамилию или имя через дефис (например: Петров-Водкин / Анна-Мария), остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** форма отправилась успешно, всплывающее сообщение "Успешно. Операция одобрена банком!"

16. **Поле "Владелец" пустое**
* Нажать на кнопку "Купить"
* Поле "Владелец" оставить пустым, остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "Владелец"

17. **Поле "Владелец" фамилия на латинице, имя отсуствует**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" только фамилию на латинице (например: Izotova), остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

18. **Поле "Владелец" фамилия и имя на кирилице**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" фамилию и имя на кириллице (например: Изотова Юлия), остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"   
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

19. **Поле "Владелец" цифрами**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" цифры, остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

20. **Поле "Владелец" спецсимволами**
* Нажать на кнопку "Купить"
* Ввести в поле "Владелец" спецсимволы, остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "Владелец"

21. **Поле "CVC/CVV" пустое**
* Нажать на кнопку "Купить"
* Оставить поле "CVC/CVV" пустым, все остальные заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Поле обязательно для заполнения" под полем "CVC/CVV"

22. **Поле "CVC/CVV" c одной цифрой**
* Нажать на кнопку "Купить"
* Ввести в поле "CVC/CVV" одну цифру (например: 3), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "CVC/CVV"

23. **Поле "CVC/CVV" c двумя цифрами**
* Нажать на кнопку "Купить"
* Ввести в поле "CVC/CVV" две цифры (например: 33), все остальные поля заполнить валидными данными
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, предупреждение "Неверный формат" под полем "CVC/CVV"

24.  **Отправка пустой формы оплаты**
* Нажать на кнопку "Купить"
* Нажать на кнопку "Продолжить"  
**Ожидаемый результат:** отправка формы невозможна, во всех полях предупреждение "Поле обязательно для заполнения"

**ВСЕ ПРОВОДИМЫЕ ТЕСТЫ ПРОВЕСТИ НА ФУНКЦИОНАЛЕ "ОПЛАТА В КРЕДИТ"**

### API-тесты
___
#### Post запросы

1. Отправка валидных данных действующей карты 4444 4444 4444 4441 (approved) на URL-адрес http://localhost:9999/payment   
**Ожидаемый результат:** ответ сервера: код 200

2. Отправка валидных данных недействующей карты 4444 4444 4444 4442 (declined) на URL-адрес http://localhost:9999/payment  
**Ожидаемый результат:** ответ сервера: код 200

3. Отправка валидных данных действующей карты 4444 4444 4444 4441 (approved) на URL-адрес http://localhost:9999/credit  
**Ожидаемый результат:** ответ сервера: код 200

4. Отправка валидных данных недействующей карты 4444 4444 4444 4442 (declined) на URL-адрес http://localhost:9999/credit  
**Ожидаемый результат:** ответ сервера: код 200
	  
## Запуск автотестов:
В новой вкладке терминала запустить тесты:
1. Для MySQL:
   ```
   ./gradlew clean test "-Ddb.url=jdbc:mysql://localhost:3306/app"
   ```
2. Для PostgreSQL:
   ```
   ./gradlew clean test "-Ddb.url=jdbc:postgresql://localhost:5432/app"
   ```

## Формирование отчета о проведенном тестировании:
Формирование отчета производится с помощью Allure. Для этого в новой вкладке терминала ввести команду
```
./gradlew allureServe
```
## Перечень используемых инструментов с обоснованием выбора:

1. `IntelliJ IDEA`- интегрированная среда разработки ПО для многих языков программирования. Удобная среда подготовки авто-тестов.
2. `Java 11` - объектно-ориентированный язык программирования, оптимальный для написания понятных и наглядных авто-тестов.
3. `JUnit 5` - инструмент тестирования, среда модульного тестирования для языка программирования Java.
4. `Gradle` - мощная и простая система автоматической сборки проектов, которая используется для упрощения работы с JAVA.
5. `Selenide` - это фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver, дающий следующие преимущества: изящный API, поддержка AJAX для стабильных тестов, мощные селекторы, простая конфигурация.
6. `Faker` - это библиотека, которая позволяет генерировать случайные данные. С ее помощью можно заполнить таблицы в базе данных, построить корректные XML-документы, сформировать JSON-ответы для REST.
7. `Allure` - фреймворк, предназначенный для создания визуально наглядной картины выполнения тестов.
8. `Docker` - Запуск необходимых приложений из контейнера без необходимости их установки на ОС.
9. `DBeaver` - удобный инструмент для работы с базами данных.
10. `MySQL` - свободная реляционная система управления базами данных.   
11. `PostgreSQL` - свободная объектно-реляционная система управления базами данных с открытым исходным кодом.
12. `Github` - хранилище SUT и авто-тестов.


## Перечень и описание возможных рисков при автоматизации:

- Трудности при настройке инструментов, необходимых для автоматизированного тестирования (одновременная поддержка 2-х СУБД, запуск контейнеров и SUT);
- Отсутствие документации на тестируемое приложение;
- Зависимость авто-тестов от текущей реализации веб-элементов (при возможном изменении структуры сайта, в ходе реализации проекта, есть риск что авто-тесты упадут;
- Отсутствие проверки графической составляющей авто-тестами
- Состояние верстки при тех или иных действиях посетителя, комфортна ли выбранная цветовая схема оформления и тд.

## Интервальная оценка с учётом рисков (в часах):
- Планирование: 20 часов;
- Автоматизация: 40 часов;
- Отчетные документы по итогам тестирования: 10 ч;
- Отчетные документы по итогам автоматизации: 10 ч;

## План сдачи работ:

*Ориентировочные даты:*
- 07.06.2024 - написание авто-тестов.
- 17.06.2024 - подготовка отчетов по результатам тестирования, автоматизации.